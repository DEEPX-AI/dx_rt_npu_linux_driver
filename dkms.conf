PACKAGE_NAME="dxrt-driver-dkms"
PACKAGE_VERSION="@DKMS_MODULE_VERSION@"

CLEAN="cd modules && make DEVICE=m1 PCIE=deepx clean"

MAKE="cd modules && make DEVICE=m1 PCIE=deepx KERNEL_DIR=/lib/modules/${kernelver}/build"

# INSTALL="cd modules && make DEVICE=m1 PCIE=deepx install KERNEL_DIR=/lib/modules/$(uname -r)/build"

#dx_dma module ko
BUILT_MODULE_NAME[0]="dx_dma"
BUILT_MODULE_LOCATION[0]="modules/pci_deepx"
DEST_MODULE_LOCATION[0]="/updates/dkms"

#dxrt_driver module ko
BUILT_MODULE_NAME[1]="dxrt_driver"
BUILT_MODULE_LOCATION[1]="modules/rt"
DEST_MODULE_LOCATION[1]="/updates/dkms"

#Automatically builds and installs the module for new/updated kernels.
AUTOINSTALL="yes"

#kernel module dependency
MODPROBE_ALIAS_AND_DEPENDS="dxrt_driver dx_dma"
